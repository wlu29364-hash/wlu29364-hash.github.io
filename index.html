<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>护肤记录</title>
  <link rel="manifest" href="/manifest.webmanifest" />
  <link rel="icon" type="image/png" sizes="192x192" href="/icon-192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="/icon-512.png" />
  <meta name="theme-color" content="#7dbf87" />
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <header class="app-header">
    <h1>护肤记录</h1>
    <span class="version-badge">v3.3.1</span>
  </header>

  <nav class="tab-bar">
    <button class="tab-btn active" data-tab="record">记录</button>
    <button class="tab-btn" data-tab="stats">统计</button>
    <button class="tab-btn" data-tab="products">产品库</button>
    <button class="tab-btn" data-tab="history">历史</button>
  </nav>

  <main>
    <section id="tab-record" class="tab active">
      <div class="card">
        <h2>记录</h2>
        <label class="field-label">日期</label>
        <input id="record-date" type="date" />

        <div class="segmented">
          <button id="record-am" class="seg-btn active" data-period="AM">早 (AM)</button>
          <button id="record-pm" class="seg-btn" data-period="PM">晚 (PM)</button>
        </div>

        <label class="field-label">使用产品</label>
        <input id="record-products-input" class="input" placeholder="可输入或从产品库选择，多项用顿号或逗号分隔" />
        <div id="record-product-tags" class="tag-row"></div>

        <label class="field-label">使用感受</label>
        <div id="feeling-options" class="chip-row"
          data-options="清爽,滋润,有刺痛,成膜感强,粘腻,闷痘,其他"></div>

        <label class="field-label">皮肤状态</label>
        <div id="skin-options" class="chip-row"
          data-options="正常,偏干,出油,T区暗沉,泛红,闷痘,稳定"></div>

        <label class="field-label">备注</label>
        <textarea id="record-note" class="textarea"
          placeholder="例如：今晚偏干，加了一片面膜……"></textarea>

        <button id="save-record" class="primary-btn">保存今日记录</button>
        <div id="toast" class="toast"></div>
      </div>
    </section>

    <section id="tab-stats" class="tab">
      <div class="card">
        <h2>统计</h2>
        <div class="segmented small">
          <button class="seg-btn small active" data-range="30">近30天</button>
          <button class="seg-btn small" data-range="week">本周</button>
          <button class="seg-btn small" data-range="month">本月</button>
        </div>
        <p id="stats-summary" class="muted"></p>
        <h3>按产品统计</h3>
        <ul id="stats-by-product" class="stat-list"></ul>
        <h3>按产品类型统计</h3>
        <ul id="stats-by-type" class="stat-list"></ul>
      </div>
    </section>

    <section id="tab-products" class="tab">
      <div class="card">
        <h2>产品库</h2>
        <label class="field-label">产品名</label>
        <input id="product-name" class="input" placeholder="例如：精华 / 面霜 / 面膜" />

        <label class="field-label">产品类型</label>
        <select id="product-type" class="input">
          <option value="精华">精华</option>
          <option value="水乳">水乳</option>
          <option value="面霜">面霜</option>
          <option value="面膜">面膜</option>
          <option value="防晒">防晒</option>
          <option value="清洁">清洁</option>
          <option value="其他">其他</option>
        </select>

        <label class="field-label">使用时段</label>
        <select id="product-period" class="input">
          <option value="both">早晚皆可</option>
          <option value="AM">仅早上</option>
          <option value="PM">仅晚上</option>
        </select>

        <button id="add-product" class="primary-btn">添加到产品库</button>
        <ul id="product-list" class="item-list"></ul>
        <p class="muted">提示：产品库仅保存在本机浏览器中。</p>
      </div>
    </section>

    <section id="tab-history" class="tab">
      <div class="card">
        <h2>历史记录</h2>
        <div id="history-list" class="history-list"></div>
        <p class="muted">长按或点击删除按钮，可删除错误记录。</p>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    所有数据仅保存在本地浏览器中。如更换设备或清理浏览器数据，记录会丢失。
  </footer>

  <script src="/app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').catch(()=>{});
      });
    }
  </script>
</body>
</html>
